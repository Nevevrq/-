<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœŸåˆ°æœŸæé†’</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
        }
        
        h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            padding: 25px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .card h2 {
            color: #3498db;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .button {
            background: #3498db;
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        .button:hover {
            background: #2980b9;
        }
        
        .button.secondary {
            background: #2ecc71;
            margin-top: 5px;
        }
        
        .button.secondary:hover {
            background: #27ae60;
        }
        
        .button.danger {
            background: #e74c3c;
        }
        
        .button.danger:hover {
            background: #c0392b;
        }
        
        .reminder-list {
            margin-top: 20px;
        }
        
        .reminder-item {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 5px solid #3498db;
            position: relative;
        }
        
        .reminder-item.warning {
            border-left-color: #f39c12;
            background: #fff9e6;
        }
        
        .reminder-item.critical {
            border-left-color: #e74c3c;
            background: #ffeaea;
        }
        
        .reminder-item.expired {
            border-left-color: #7f8c8d;
            background: #f5f5f5;
            opacity: 0.8;
        }
        
        .reminder-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .reminder-date {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .reminder-days {
            font-weight: 600;
            color: #2c3e50;
            margin-top: 5px;
        }
        
        .reminder-actions {
            position: absolute;
            top: 15px;
            right: 15px;
        }
        
        .delete-btn {
            background: none;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0 5px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-safe {
            background: #2ecc71;
        }
        
        .status-warning {
            background: #f39c12;
        }
        
        .status-critical {
            background: #e74c3c;
        }
        
        .status-expired {
            background: #7f8c8d;
        }
        
        .summary {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .summary-item {
            flex: 1;
            min-width: 150px;
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .summary-count {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .today-date {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .no-reminders {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }
        
        .notification-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 350px;
        }
        
        .notification {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            border-left: 5px solid #3498db;
            display: flex;
            align-items: center;
            animation: slideIn 0.3s ease-out;
        }
        
        .notification.warning {
            border-left-color: #f39c12;
        }
        
        .notification.critical {
            border-left-color: #e74c3c;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-close {
            background: none;
            border: none;
            color: #7f8c8d;
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: auto;
            padding: 0 5px;
        }
        
        .filter-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 8px 15px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .export-import {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .export-import .button {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“… æ—¥æœŸåˆ°æœŸæé†’æ©Ÿå™¨äºº</h1>
            <p class="subtitle">è¨­å®šé‡è¦æ—¥æœŸï¼Œæå‰30å¤©è‡ªå‹•æé†’æ‚¨ï¼Œé¿å…éŒ¯éä»»ä½•æˆªæ­¢æ—¥æœŸ</p>
        </header>
        
        <div class="today-date" id="todayDate"></div>
        
        <div class="dashboard">
            <div class="card">
                <h2>â• æ–°å¢æé†’äº‹é …</h2>
                <form id="reminderForm">
                    <div class="form-group">
                        <label for="title">äº‹é …åç¨± *</label>
                        <input type="text" id="title" placeholder="ä¾‹å¦‚ï¼šä¿éšªåˆ°æœŸã€é§•ç…§æ›´æ–°ã€æœƒå“¡çºŒè²»..." required>
                    </div>
                    
                    <div class="form-group">
                        <label for="date">åˆ°æœŸæ—¥æœŸ *</label>
                        <input type="date" id="date" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">äº‹é …æè¿° (é¸å¡«)</label>
                        <textarea id="description" placeholder="è£œå……èªªæ˜æˆ–å‚™è¨»..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="reminderDays">æå‰æé†’å¤©æ•¸</label>
                        <input type="number" id="reminderDays" min="1" max="365" value="30">
                        <small>ç³»çµ±å°‡åœ¨æ­¤æ—¥æœŸå‰æŒ‡å®šçš„å¤©æ•¸æé†’æ‚¨</small>
                    </div>
                    
                    <button type="submit" class="button">æ–°å¢æé†’äº‹é …</button>
                </form>
                
                <div class="export-import">
                    <button type="button" class="button secondary" id="exportBtn">åŒ¯å‡ºæé†’æ¸…å–®</button>
                    <button type="button" class="button secondary" id="importBtn">åŒ¯å…¥æé†’æ¸…å–®</button>
                </div>
            </div>
            
            <div class="card">
                <h2>ğŸ“Š æé†’ç¸½è¦½</h2>
                
                <div class="summary">
                    <div class="summary-item">
                        <div class="summary-count" id="totalCount">0</div>
                        <div class="summary-label">ç¸½äº‹é …</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-count" id="upcomingCount">0</div>
                        <div class="summary-label">å³å°‡åˆ°æœŸ</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-count" id="criticalCount">0</div>
                        <div class="summary-label">ç·Šæ€¥äº‹é …</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-count" id="expiredCount">0</div>
                        <div class="summary-label">å·²éæœŸ</div>
                    </div>
                </div>
                
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">å…¨éƒ¨</button>
                    <button class="filter-btn" data-filter="upcoming">å³å°‡åˆ°æœŸ</button>
                    <button class="filter-btn" data-filter="critical">ç·Šæ€¥</button>
                    <button class="filter-btn" data-filter="expired">å·²éæœŸ</button>
                </div>
                
                <div class="reminder-list" id="reminderList">
                    <div class="no-reminders" id="noReminders">
                        <p>ç›®å‰æ²’æœ‰ä»»ä½•æé†’äº‹é …</p>
                        <p>è«‹åœ¨å·¦å´è¡¨å–®æ–°å¢æ‚¨çš„ç¬¬ä¸€å€‹æé†’</p>
                    </div>
                </div>
                
                <button type="button" class="button danger" id="clearAllBtn" style="display: none;">æ¸…é™¤æ‰€æœ‰æé†’</button>
            </div>
        </div>
        
        <footer>
            <p>Â© 2025 æ—¥æœŸåˆ°æœŸæé†’ | æ•¸æ“šå„²å­˜åœ¨æœ¬åœ°ç€è¦½å™¨ï¼Œä¸æœƒä¸Šå‚³åˆ°ä¼ºæœå™¨</p>
            <p>ä½¿ç”¨æé†’ï¼šå»ºè­°å®šæœŸåŒ¯å‡ºå‚™ä»½æ‚¨çš„æé†’æ¸…å–®</p>
        </footer>
    </div>
    
    <div class="notification-panel" id="notificationPanel"></div>

    <script>
        // åˆå§‹åŒ–è®Šæ•¸
        let reminders = [];
        let currentFilter = 'all';
        
        // DOM å…ƒç´ 
        const reminderForm = document.getElementById('reminderForm');
        const reminderList = document.getElementById('reminderList');
        const noReminders = document.getElementById('noReminders');
        const todayDate = document.getElementById('todayDate');
        const totalCount = document.getElementById('totalCount');
        const upcomingCount = document.getElementById('upcomingCount');
        const criticalCount = document.getElementById('criticalCount');
        const expiredCount = document.getElementById('expiredCount');
        const clearAllBtn = document.getElementById('clearAllBtn');
        const exportBtn = document.getElementById('exportBtn');
        const importBtn = document.getElementById('importBtn');
        const notificationPanel = document.getElementById('notificationPanel');
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // è¨­å®šä»Šæ—¥æ—¥æœŸé¡¯ç¤º
            updateTodayDate();
            
            // è¨­å®šæ—¥æœŸè¼¸å…¥æ¡†çš„æœ€å°å€¼ç‚ºä»Šå¤©
            document.getElementById('date').min = new Date().toISOString().split('T')[0];
            
            // å¾æœ¬åœ°å„²å­˜è¼‰å…¥æé†’äº‹é …
            loadReminders();
            
            // è¨­å®šè¡¨å–®æäº¤äº‹ä»¶
            reminderForm.addEventListener('submit', addReminder);
            
            // è¨­å®šç¯©é¸æŒ‰éˆ•äº‹ä»¶
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentFilter = this.getAttribute('data-filter');
                    renderReminders();
                });
            });
            
            // è¨­å®šæ¸…é™¤æ‰€æœ‰æŒ‰éˆ•äº‹ä»¶
            clearAllBtn.addEventListener('click', clearAllReminders);
            
            // è¨­å®šåŒ¯å‡º/åŒ¯å…¥æŒ‰éˆ•äº‹ä»¶
            exportBtn.addEventListener('click', exportReminders);
            importBtn.addEventListener('click', importReminders);
            
            // æ¯æ—¥æª¢æŸ¥æé†’
            checkDailyReminders();
            
            // æ¨¡æ“¬ä¸€äº›åˆå§‹æ•¸æ“šï¼ˆåƒ…åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ™‚ï¼‰
            if (reminders.length === 0) {
                addSampleReminders();
            }
        });
        
        // æ›´æ–°ä»Šæ—¥æ—¥æœŸé¡¯ç¤º
        function updateTodayDate() {
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
            todayDate.textContent = `ä»Šå¤©æ—¥æœŸï¼š${today.toLocaleDateString('zh-TW', options)}`;
        }
        
        // å¾æœ¬åœ°å„²å­˜è¼‰å…¥æé†’äº‹é …
        function loadReminders() {
            const saved = localStorage.getItem('dateReminders');
            if (saved) {
                reminders = JSON.parse(saved);
                // å°‡æ—¥æœŸå­—ä¸²è½‰æ›å› Date ç‰©ä»¶
                reminders.forEach(reminder => {
                    reminder.date = new Date(reminder.date);
                    if (reminder.created) reminder.created = new Date(reminder.created);
                });
            }
            renderReminders();
            updateSummary();
        }
        
        // å„²å­˜æé†’äº‹é …åˆ°æœ¬åœ°å„²å­˜
        function saveReminders() {
            // å°‡ Date ç‰©ä»¶è½‰æ›ç‚ºå­—ä¸²ä»¥ä¾¿å„²å­˜
            const remindersToSave = reminders.map(reminder => ({
                ...reminder,
                date: reminder.date.toISOString(),
                created: reminder.created ? reminder.created.toISOString() : new Date().toISOString()
            }));
            localStorage.setItem('dateReminders', JSON.stringify(remindersToSave));
            renderReminders();
            updateSummary();
        }
        
        // æ–°å¢æé†’äº‹é …
        function addReminder(e) {
            e.preventDefault();
            
            const title = document.getElementById('title').value.trim();
            const date = new Date(document.getElementById('date').value);
            const description = document.getElementById('description').value.trim();
            const reminderDays = parseInt(document.getElementById('reminderDays').value) || 30;
            
            if (!title || !date) {
                showNotification('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½', 'warning');
                return;
            }
            
            // æª¢æŸ¥æ—¥æœŸæ˜¯å¦æœ‰æ•ˆ
            if (isNaN(date.getTime())) {
                showNotification('è«‹é¸æ“‡æœ‰æ•ˆçš„æ—¥æœŸ', 'warning');
                return;
            }
            
            const newReminder = {
                id: Date.now(),
                title,
                date,
                description,
                reminderDays,
                created: new Date()
            };
            
            reminders.push(newReminder);
            saveReminders();
            
            // é‡ç½®è¡¨å–®
            reminderForm.reset();
            document.getElementById('date').min = new Date().toISOString().split('T')[0];
            document.getElementById('reminderDays').value = 30;
            
            showNotification(`å·²æ–°å¢æé†’äº‹é …ï¼š${title}`, 'info');
            
            // æª¢æŸ¥æ˜¯å¦éœ€è¦ç«‹å³æé†’
            checkReminderStatus(newReminder);
        }
        
        // åˆªé™¤æé†’äº‹é …
        function deleteReminder(id) {
            const reminder = reminders.find(r => r.id === id);
            if (reminder) {
                reminders = reminders.filter(r => r.id !== id);
                saveReminders();
                showNotification(`å·²åˆªé™¤æé†’äº‹é …ï¼š${reminder.title}`, 'info');
            }
        }
        
        // æ¸…é™¤æ‰€æœ‰æé†’äº‹é …
        function clearAllReminders() {
            if (reminders.length === 0) return;
            
            if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰æé†’äº‹é …å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚')) {
                reminders = [];
                saveReminders();
                showNotification('å·²æ¸…é™¤æ‰€æœ‰æé†’äº‹é …', 'info');
            }
        }
        
        // åŒ¯å‡ºæé†’äº‹é …
        function exportReminders() {
            if (reminders.length === 0) {
                showNotification('æ²’æœ‰ä»»ä½•æé†’äº‹é …å¯ä»¥åŒ¯å‡º', 'warning');
                return;
            }
            
            const dataStr = JSON.stringify(reminders, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `æé†’äº‹é …å‚™ä»½_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('æé†’äº‹é …å·²åŒ¯å‡ºç‚º JSON æª”æ¡ˆ', 'info');
        }
        
        // åŒ¯å…¥æé†’äº‹é …
        function importReminders() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    try {
                        const importedReminders = JSON.parse(event.target.result);
                        
                        // é©—è­‰è³‡æ–™æ ¼å¼
                        if (!Array.isArray(importedReminders)) {
                            throw new Error('æª”æ¡ˆæ ¼å¼ä¸æ­£ç¢º');
                        }
                        
                        // è½‰æ›æ—¥æœŸå­—ä¸²ç‚º Date ç‰©ä»¶
                        importedReminders.forEach(reminder => {
                            reminder.date = new Date(reminder.date);
                            if (reminder.created) reminder.created = new Date(reminder.created);
                            else reminder.created = new Date();
                            
                            // ç¢ºä¿æ¯å€‹æé†’æœ‰å”¯ä¸€çš„ ID
                            if (!reminder.id) reminder.id = Date.now() + Math.random();
                        });
                        
                        // åˆä½µåˆ°ç¾æœ‰æé†’æ¸…å–®ï¼ˆé¿å…é‡è¤‡ï¼‰
                        const existingIds = reminders.map(r => r.id);
                        const newReminders = importedReminders.filter(r => !existingIds.includes(r.id));
                        
                        reminders = [...reminders, ...newReminders];
                        saveReminders();
                        
                        showNotification(`å·²æˆåŠŸåŒ¯å…¥ ${newReminders.length} å€‹æé†’äº‹é …`, 'info');
                    } catch (error) {
                        showNotification('åŒ¯å…¥å¤±æ•—ï¼šæª”æ¡ˆæ ¼å¼ä¸æ­£ç¢º', 'critical');
                        console.error(error);
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // è¨ˆç®—å‰©é¤˜å¤©æ•¸
        function getDaysRemaining(date) {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const targetDate = new Date(date);
            targetDate.setHours(0, 0, 0, 0);
            
            const diffTime = targetDate.getTime() - today.getTime();
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            return diffDays;
        }
        
        // å–å¾—æé†’ç‹€æ…‹
        function getReminderStatus(reminder) {
            const daysRemaining = getDaysRemaining(reminder.date);
            
            if (daysRemaining < 0) {
                return 'expired';
            } else if (daysRemaining <= 7) {
                return 'critical';
            } else if (daysRemaining <= reminder.reminderDays) {
                return 'warning';
            } else {
                return 'safe';
            }
        }
        
        // æª¢æŸ¥æé†’ç‹€æ…‹ä¸¦é¡¯ç¤ºé€šçŸ¥
        function checkReminderStatus(reminder) {
            const status = getReminderStatus(reminder);
            const daysRemaining = getDaysRemaining(reminder.date);
            
            if (status === 'critical' && daysRemaining >= 0) {
                showNotification(`ç·Šæ€¥ï¼š${reminder.title} å°‡åœ¨ ${daysRemaining} å¤©å¾Œåˆ°æœŸ`, 'critical');
            } else if (status === 'warning') {
                showNotification(`æé†’ï¼š${reminder.title} å°‡åœ¨ ${daysRemaining} å¤©å¾Œåˆ°æœŸ`, 'warning');
            }
        }
        
        // æ¯æ—¥æª¢æŸ¥æé†’
        function checkDailyReminders() {
            const lastCheck = localStorage.getItem('lastReminderCheck');
            const today = new Date().toDateString();
            
            // å¦‚æœä»Šå¤©å·²ç¶“æª¢æŸ¥éï¼Œå‰‡è·³é
            if (lastCheck === today) return;
            
            // æª¢æŸ¥æ‰€æœ‰æé†’äº‹é …
            reminders.forEach(reminder => {
                checkReminderStatus(reminder);
            });
            
            // æ›´æ–°æœ€å¾Œæª¢æŸ¥æ—¥æœŸ
            localStorage.setItem('lastReminderCheck', today);
        }
        
        // é¡¯ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            // æ ¹æ“šé¡å‹è¨­å®šåœ–ç¤º
            let icon = 'â„¹ï¸';
            if (type === 'warning') icon = 'âš ï¸';
            if (type === 'critical') icon = 'ğŸš¨';
            
            notification.innerHTML = `
                <span>${icon}</span>
                <span style="flex: 1; margin: 0 10px;">${message}</span>
                <button class="notification-close">&times;</button>
            `;
            
            // è¨­å®šé—œé–‰æŒ‰éˆ•äº‹ä»¶
            notification.querySelector('.notification-close').addEventListener('click', function() {
                notification.remove();
            });
            
            // è‡ªå‹•ç§»é™¤é€šçŸ¥ï¼ˆ5ç§’å¾Œï¼‰
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) notification.remove();
                    }, 300);
                }
            }, 5000);
            
            notificationPanel.appendChild(notification);
        }
        
        // æ¸²æŸ“æé†’äº‹é …åˆ—è¡¨
        function renderReminders() {
            reminderList.innerHTML = '';
            
            // æ ¹æ“šç¯©é¸æ¢ä»¶éæ¿¾æé†’äº‹é …
            let filteredReminders = reminders;
            
            if (currentFilter === 'upcoming') {
                filteredReminders = reminders.filter(r => getReminderStatus(r) === 'warning');
            } else if (currentFilter === 'critical') {
                filteredReminders = reminders.filter(r => getReminderStatus(r) === 'critical');
            } else if (currentFilter === 'expired') {
                filteredReminders = reminders.filter(r => getReminderStatus(r) === 'expired');
            }
            
            // æŒ‰æ—¥æœŸæ’åºï¼ˆæœ€è¿‘åˆ°æœŸçš„åœ¨å‰ï¼‰
            filteredReminders.sort((a, b) => a.date - b.date);
            
            if (filteredReminders.length === 0) {
                noReminders.style.display = 'block';
                clearAllBtn.style.display = 'none';
            } else {
                noReminders.style.display = 'none';
                clearAllBtn.style.display = reminders.length > 0 ? 'block' : 'none';
                
                filteredReminders.forEach(reminder => {
                    const daysRemaining = getDaysRemaining(reminder.date);
                    const status = getReminderStatus(reminder);
                    
                    const reminderItem = document.createElement('div');
                    reminderItem.className = `reminder-item ${status}`;
                    
                    // ç‹€æ…‹æŒ‡ç¤ºå™¨
                    let statusIcon = 'ğŸŸ¢';
                    let statusText = 'å®‰å…¨';
                    if (status === 'warning') {
                        statusIcon = 'ğŸŸ¡';
                        statusText = 'å³å°‡åˆ°æœŸ';
                    } else if (status === 'critical') {
                        statusIcon = 'ğŸ”´';
                        statusText = 'ç·Šæ€¥';
                    } else if (status === 'expired') {
                        statusIcon = 'âš«';
                        statusText = 'å·²éæœŸ';
                    }
                    
                    // æ ¼å¼åŒ–æ—¥æœŸ
                    const dateStr = reminder.date.toLocaleDateString('zh-TW', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        weekday: 'long'
                    });
                    
                    reminderItem.innerHTML = `
                        <div class="reminder-actions">
                            <button class="delete-btn" data-id="${reminder.id}">&times;</button>
                        </div>
                        <div class="reminder-title">${statusIcon} ${reminder.title}</div>
                        <div class="reminder-date">åˆ°æœŸæ—¥æœŸï¼š${dateStr}</div>
                        ${reminder.description ? `<div class="reminder-description">${reminder.description}</div>` : ''}
                        <div class="reminder-days">
                            ${daysRemaining >= 0 ? 
                                `å‰©é¤˜ ${daysRemaining} å¤© (${statusText})` : 
                                `å·²éæœŸ ${Math.abs(daysRemaining)} å¤©`}
                        </div>
                    `;
                    
                    reminderList.appendChild(reminderItem);
                    
                    // è¨­å®šåˆªé™¤æŒ‰éˆ•äº‹ä»¶
                    reminderItem.querySelector('.delete-btn').addEventListener('click', function() {
                        deleteReminder(reminder.id);
                    });
                });
            }
        }
        
        // æ›´æ–°æ‘˜è¦çµ±è¨ˆ
        function updateSummary() {
            totalCount.textContent = reminders.length;
            
            const upcoming = reminders.filter(r => getReminderStatus(r) === 'warning').length;
            const critical = reminders.filter(r => getReminderStatus(r) === 'critical').length;
            const expired = reminders.filter(r => getReminderStatus(r) === 'expired').length;
            
            upcomingCount.textContent = upcoming;
            criticalCount.textContent = critical;
            expiredCount.textContent = expired;
            
            // å¦‚æœæœ‰ç·Šæ€¥äº‹é …ï¼Œæ›´æ–°æ¨™é¡Œæé†’
            if (critical > 0) {
                document.title = `(${critical}) æ—¥æœŸåˆ°æœŸæé†’`;
            } else {
                document.title = 'æ—¥æœŸåˆ°æœŸæé†’';
            }
        }
        
        // æ–°å¢ç¯„ä¾‹æé†’äº‹é …ï¼ˆåƒ…åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ™‚ï¼‰
        function addSampleReminders() {
            const today = new Date();
            
            const sampleReminders = [
                {
                    id: Date.now() + 1,
                    title: "é§•ç…§åˆ°æœŸæ›´æ–°",
                    date: new Date(today.getFullYear(), today.getMonth(), today.getDate() + 45),
                    description: "è¨˜å¾—å¸¶èº«åˆ†è­‰ã€èˆŠé§•ç…§å’Œç…§ç‰‡",
                    reminderDays: 30,
                    created: new Date()
                },
                {
                    id: Date.now() + 2,
                    title: "æ±½è»Šä¿éšªçºŒä¿",
                    date: new Date(today.getFullYear(), today.getMonth(), today.getDate() + 15),
                    description: "è¯çµ¡ä¿éšªæ¥­å‹™å“¡ï¼šç‹å…ˆç”Ÿ 0912-345-678",
                    reminderDays: 30,
                    created: new Date()
                },
                {
                    id: Date.now() + 3,
                    title: "ç¶²è·¯æœƒå“¡è¨‚é–±",
                    date: new Date(today.getFullYear(), today.getMonth(), today.getDate() + 5),
                    description: "è‡ªå‹•æ‰£æ¬¾ï¼Œæª¢æŸ¥ä¿¡ç”¨å¡é¡åº¦",
                    reminderDays: 30,
                    created: new Date()
                },
                {
                    id: Date.now() + 4,
                    title: "è­·ç…§åˆ°æœŸæ›ç™¼",
                    date: new Date(today.getFullYear(), today.getMonth(), today.getDate() + 90),
                    description: "éœ€æº–å‚™6å€‹æœˆå…§ç…§ç‰‡",
                    reminderDays: 30,
                    created: new Date()
                }
            ];
            
            reminders = sampleReminders;
            saveReminders();
        }
    </script>
</body>
</html>
